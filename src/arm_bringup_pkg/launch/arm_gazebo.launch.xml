<launch>
    <let name = "urdf_path"
        value="$(find-pkg-share arm_description_pkg)/meshes_upright_xacro_copy/GS_arm_combo.urdf.xacro" />

    <let name = "rviz_config" 
        value = "$(find-pkg-share arm_bringup_pkg)/rviz/arm_config.rviz"/>


    <node pkg="robot_state_publisher" exec="robot_state_publisher">
            <param name= "robot_description"
            value="$(command 'xacro $(var urdf_path)')"/>

    </node>

    <!-- <node pkg="joint_state_publisher" exec="joint_state_publisher"/> -->
    <!-- without this joint_state_publisher rviz works kindoff oddly -->
    <!-- <node pkg="joint_state_publisher_gui" exec="joint_state_publisher_gui"/> -->


    <include file= "$(find-pkg-share gazebo_ros)/launch/gazebo.launch.py" >
    <arg name="world" value = "$(find-pkg-share arm_bringup_pkg)/world/GS_arm_world.world"/>
    </include>

    <include file= "$(find-pkg-share arm_controller_pkg)/launch/controller.launch.py" >
    </include>


    <node pkg ="gazebo_ros" exec = "spawn_entity.py"
     args ="-topic robot_description -entity GS_arm" />

    <node pkg ="rviz2" exec = "rviz2" output="screen"
        args= "-d $(var rviz_config)"/>

    <node pkg = "armkin_pkg" exec = "GS_arm_angcontrol"/>
    <node pkg = "armcam_pkg" exec = "GS_cam_node"/>



</launch>